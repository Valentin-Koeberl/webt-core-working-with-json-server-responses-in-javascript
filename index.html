<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding Location Picker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <style>
        .location-display {
            margin: 2rem auto;
            padding: 2rem;
            background-color: #f8f9fa;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .location-title {
            font-size: 1.5rem;
            font-weight: bold;
        }
        .location-description {
            margin-top: 1rem;
        }
    </style>
</head>
<body>
<div class="container">
    <h1 class="text-center my-4">Wedding Location Picker</h1>

    <!-- Random Location Button -->
    <div class="text-center mb-4">
        <button id="getRandomLocation" class="btn btn-primary">Get Random Wedding Location</button>
    </div>

    <!-- Display Area for Wedding Location -->
    <div id="locationDisplay" class="location-display d-none">
        <p id="locationTitle" class="location-title"></p>
        <p id="locationPlace" class="location-place"></p>
        <p id="locationDescription" class="location-description"></p>
    </div>

    <!-- Debug Output (Optional) -->
    <div id="debugOutput" class="mt-4"></div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const randomButton = document.getElementById('getRandomLocation');
        const locationDisplay = document.getElementById('locationDisplay');
        const locationTitle = document.getElementById('locationTitle');
        const locationPlace = document.getElementById('locationPlace');
        const locationDescription = document.getElementById('locationDescription');
        const debugOutput = document.getElementById('debugOutput');

        const fetchData = async (url) => {
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                console.error('Error fetching data:', error);
                debugOutput.textContent = `Error: ${error.message}`;
            }
        };

        const displayRandomLocation = (locations) => {
            if (locations && locations.length > 0) {
                const randomIndex = Math.floor(Math.random() * locations.length);
                const selected = locations[randomIndex];
                locationTitle.textContent = selected.name || 'Unknown Location';
                locationPlace.textContent = selected.address || 'Unknown Address';
                locationDescription.textContent = selected.description || 'No Description Available';
                locationDisplay.classList.remove('d-none');
            } else {
                console.error('No locations available to display.');
            }
        };

        randomButton.addEventListener('click', async () => {
            const url = 'https://data.wien.gv.at/daten/geo?service=WFS&request=GetFeature&version=1.1.0&typeName=ogdwien:TRAUMHOCHZEITOGD&srsName=EPSG:4326&outputFormat=json';
            const data = await fetchData(url);
            if (data && data.features) {
                const locations = data.features.map(feature => ({
                    name: feature.properties.NAME,
                    address: feature.properties.ADRESSE,
                    description: feature.properties.BESCHREIBUNG
                }));
                debugOutput.textContent = JSON.stringify(locations, null, 2); // Optional Debug Output
                displayRandomLocation(locations);
            }
        });
    });
</script>
</body>
</html>
